# RabbitMQ cluster formation using classic config peer discovery
# This avoids external init scripts and makes compose startup more production-like.

cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
cluster_formation.classic_config.nodes.1 = rabbit@rabbit1
cluster_formation.classic_config.nodes.2 = rabbit@rabbit2
cluster_formation.classic_config.nodes.3 = rabbit@rabbit3

# Prefer stability under partitions
cluster_partition_handling = pause_minority

# Keep node cleanup conservative
cluster_formation.node_cleanup.interval = 30
cluster_formation.node_cleanup.only_log_warning = true

# Hint used by some discovery backends and internal logic
cluster_formation.target_cluster_size_hint = 3
